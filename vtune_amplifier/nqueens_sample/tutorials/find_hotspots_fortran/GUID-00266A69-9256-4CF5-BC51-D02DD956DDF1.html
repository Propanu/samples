<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0014)about:internet -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="DC.Type" content="topic" />
<meta name="DC.Title" content="Interpret Concurrency Results" />
<meta name="DC.Relation" scheme="URI" content="GUID-742F5949-4A88-4170-9A20-425DD0CFB029.html" />
<meta name="prodname" content="VTune Amplifier" />
<meta name="version" content="2016" />
<meta name="series" content="" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="GUID-00266A69-9256-4CF5-BC51-D02DD956DDF1" />
<meta name="DC.Language" content="en-US" />
<link rel="stylesheet" type="text/css" href="intel_css_styles.css" />
<title>Interpret Concurrency Results</title>
<script src="resources/prism/prism.js"><!----></script>
<link href="resources/prism/prism.css" rel="stylesheet" />
</head>
<body id="GUID-00266A69-9256-4CF5-BC51-D02DD956DDF1">
 <!-- ==============(Start:NavScript)================= -->
 <script src="NavScript.js" language="JavaScript1.2" type="text/javascript"></script>
 <script language="JavaScript1.2" type="text/javascript">WriteNavLink(0);</script>
 <!-- ==============(End:NavScript)================= -->
<p id="header_text" style="margin-bottom : 20pt"><em>Intel&reg; VTune&#8482; Amplifier</em></p>


<h1 class="topictitle1">Interpret Concurrency Results</h1>
<div><p id="GUID-62665B94-7D2B-4673-8CBC-3B07DB216DC1"><img id="IMAGE_598638645A354EDC820F133378E02B3E" src="GUID-02914B5D-1A7D-4B4B-8A24-9534BDA714E4-low.gif" /> When the sample application exits, the 
		<span>Intel&reg; VTune&#8482; Amplifier</span>
		finalizes the results and opens the 
		<b class="uicontrol" id="GUID-8987B3D5-3946-4892-B838-322A66BFDE9E">Hotspots by CPU
		  Usage</b> viewpoint where each window or pane is configured to display
		data on application parallelism and usage of processor cores. To interpret the
		data on the sample code performance, do the following: 
	 </p>
<ol id="GUID-3B8A69E3-2AB1-4BF4-B6D1-98E7597CFFFA"><li id="LI_06F107C1F35346EF835EF7EFD837D919"><p><a href="#GUID-8551FEEE-ACCB-4239-8978-FC7E6E9ABE35">Explore
				application-level concurrency</a></p>
</li>
<li id="LI_8D77AB6C60FD470484EE7D750D75C9F0"><p><a href="#GUID-53CC159B-5977-4460-A391-894EF959E42B">Identify
				the most time-consuming function.</a></p>
</li>
</ol>
<p id="GUID-F845D207-A601-4F75-A36C-F5938A1FCC6F"><div class="Note"><h3 class="NoteTipHead">Note</h3> <p id="GUID-6E7E60F3-4A88-4577-90E3-96EE180104BD">The screenshots and
			 execution time data provided in this tutorial are created on a system with 4
			 CPU cores. Your data may vary depending on the number and type of CPU cores on
			 your system. 
		  </p>
</div>
</p>
<div class="section" id="GUID-8551FEEE-ACCB-4239-8978-FC7E6E9ABE35"><h2 class="sectiontitle">Explore Application-level Concurrency</h2><p>Start analysis with the 
		  <strong>Summary</strong> window that opens by default when data collection
		  completes. To interpret the data, hover over the question mark icons 
		  <img id="IMAGE_1ABC51AE86E94D7A91A17EDA30FEDD16" src="GUID-08AABA1E-7FDD-4ACF-8B4E-FA82F6AE7773-low.gif" /> to read the pop-up help and
		  better understand what each performance metric means. 
		</p>
<p>You see that after optimization, the
		  Elapsed time has increased from 80.402 seconds to 75.093 seconds. 
		</p>
<p><img id="IMAGE_07605F75B9B94A2583F102E6EB7DE321" src="GUID-E1CF4EE8-7CCA-4F5B-B13E-F254C5ADEEFD-low.gif" /></p>
<div class="Note"><h3 class="NoteTipHead">Note</h3> <p>The Concurrency analysis adds an overhead to the application
			 execution. The overhead often depends on the number of threads and
			 synchronization objects used in the application. This is the reason why Elapsed
			 time data provided in the 
			 <strong>Summary</strong> window may differ from the data reported after the
			 application launch outside of the VTune Amplifier. 
		  </p>
</div>
<p>The 
		  <strong>CPU Usage Histogram</strong> shows that the average concurrency level of
		  the sample application is 
		  <span>about 2</span> while the target concurrency level
		  for this application on the 4-core system is 
		  <span>8</span>. If you hover over the highest bar, you
		  see that this application has run 
		  <span>1</span> threads for 
		  <span>almost 24</span> seconds, which is categorized by
		  the VTune Amplifier as 
		  <span>Poor</span> processor utilization on this system. 
		</p>
<p><img id="IMAGE_3E434230A81E49CAB990BC980FA0B4C8" src="GUID-4723F703-BADE-4EF2-841F-367ED7E9A322-low.gif" /></p>
</div>
<div class="section" id="GUID-53CC159B-5977-4460-A391-894EF959E42B"><h2 class="sectiontitle">Identify the Most Time-consuming Function</h2><p>Click the 
		  <strong>Bottom-up</strong> tab to switch to the 
		  <strong>Bottom-up</strong> window and analyze application performance by
		  function. By default, the grid is sorted by the 
		  <strong>CPU Time</strong> metric in the descending order. Select the 
		  <strong>Process/Function/Thread/Call Stack</strong> grouping level from the 
		  <strong>Grouping</strong> menu. This granularity enables you to visualize threads
		  where the hotspots functions were executed. 
		</p>
<p>After initial optimization, the 
		  <samp class="codeph">nqueens_IP_setqueen</samp> function is still
		  a bottleneck. Click the arrow sign 
		  <img id="IMAGE_8298D5B82D2B43F58F1816DDE940CE89" src="GUID-FB99E6CF-E5AE-4C62-BC34-5330982D70A5-low.gif" /> at the 
		  <samp class="codeph">nqueens_IP_setqueen</samp> function. You see
		  that this function's execution was parallelized among fifteen threads. 
		</p>
<p><img id="IMAGE_A2CE1437FA324C28AA136BA73F000ED6" src="GUID-6F7D686F-671E-4420-99DB-B79F1F0973AC-low.gif" /></p>
<p>Select these threads in the grid, right-click and choose the 
		  <strong>Filter In by Selection</strong> context menu option. The 
		  <strong>Timeline</strong> pane below is updated to display data for the selected
		  threads only. 
		</p>
<p><img id="IMAGE_051951BFCF18422388FBADF3CDE5B492" src="GUID-94B47697-14BF-4560-99DF-DB65917F39C3-low.gif" /></p>

<div class="tablenoborder"><table cellpadding="4" summary="" id="GUID-1C693975-D8FE-4039-A789-FE3428448D69" width="100%" frame="void" border="1" rules="none" cellspacing="2"><tbody><tr><td class="noborder" valign="top" width="7.262164124909224%"><p id="GUID-46B320A2-46E4-47DA-ADDA-1BF3686EE827"><img id="IMAGE_292B0734932C43E1AD82B1DBDB4E1D76" height="22" src="GUID-A4AF9F6D-C2F3-4CC2-BC62-4EF73CA76B7B-low.jpg" width="22" alt="1" /></p>
</td>
<td class="noborder" valign="top" width="92.73783587509078%"><p id="GUID-25A5FF94-BE25-4895-B6D9-4C442D94EBE9"><strong>Timeline area</strong>. When you
						hover over the graph element, the timeline tooltip displays the time passed
						since the application has been launched. 
					 </p>
</td>
</tr>
<tr><td class="noborder" valign="top" width="7.262164124909224%"><p id="GUID-1DE15FF1-DE34-4C25-948E-1942336D6755"><img id="IMAGE_2A35B38779294DAD98BC3943280E4847" height="22" src="GUID-D8DBA40B-558C-4899-B9B6-9068F1CAE124-low.jpg" width="22" alt="2" /></p>
</td>
<td class="noborder" valign="top" width="92.73783587509078%"><p id="GUID-9556A181-47EA-4DFB-AC3C-EE05789CBB3F"><strong>Threads
						  area</strong> that shows the distribution of CPU time utilization per thread. Hover
						over a bar to see the CPU time utilization in percent for this thread at each
						moment of time. Dark green zones show the time threads are active. Light-green
						zones show the time threads were waiting. 
					 </p>
</td>
</tr>
<tr><td class="noborder" valign="top" width="7.262164124909224%"><p id="GUID-D1E00998-5679-4B94-8D97-42906FB8FDCD"><img id="IMAGE_C6BE482D65CD443FA8CF146487586A14" height="22" src="GUID-EC89F6F7-1D37-4D59-82B5-710853E15391-low.jpg" width="22" alt="3" /></p>
</td>
<td class="noborder" valign="top" width="92.73783587509078%"><p><strong>Performance metric area</strong> that shows application
						performance over time by a performance metric. In the 
						<strong>Hotspots by CPU Usage</strong> viewpoint, 
						<strong>CPU Usage 
						</strong>and 
						<strong>Thread Concurrency</strong> metrics are used. 
					 </p>
<p>The CPU Usage chart shows the distribution of CPU time
						utilization for the whole application. Hover over a bar to see the
						application-level CPU time utilization in percent at the particular moment.
						VTune Amplifier calculates the overall 
						<strong>CPU Usage</strong> metric as the sum of CPU time per each
						thread of the Threads area. Maximum 
						<strong>CPU Usage</strong> value is equal to [number of processor
						cores] x 100%. 
					 </p>
<p>The 
						<strong>Thread Concurrency</strong> chart shows the application-level
						thread concurrency at each moment of time. Hover over a bar to see an exact
						concurrency level at the particular moment. 
					 </p>
<p id="GUID-12C679E9-66E9-44C2-9CFD-6C88095C9165"><strong>Transitions</strong>. The
						execution flow between threads where one thread signals to another thread
						waiting to receive that signal. You may zoom in to a time region to get more
						detailed view of the transitions. To do this, drag and drop to select the
						region and right-click to select the 
						<strong>Zoom In on Selection</strong> option from the context menu. 
					 </p>
</td>
</tr>
</tbody>
</table>
</div>
<p>The 
		  <strong>Timeline</strong> pane for the sample application shows 
		  <span>a large number of transitions between
			 threads, which means that the threads spent noticeable time transferring
			 execution to each other. If you uncheck the 
			 <strong>Transitions</strong> display option on the right, you see 
		  </span>that workload balance is 
		  <span>also 
		  </span>poor since many of the threads were waiting for 
		  <samp class="codeph">OMP Worker Thread #7</samp> to complete execution. 
		</p>
<p>Run the Locks and Waits analysis to understand what prevents the
		  sample code from effective thread concurrency and processor utilization. 
		</p>
</div>
<div class="section" id="GUID-F32C84F6-D38D-406B-8E84-B4A4949E2759"><h2 class="sectiontitle">Key Terms </h2><ul id="GUID-CF1720F3-BF52-414D-BABA-E02EC0A397B9"><li id="LI_B03C46F8238D466ABA5A7A3470049247"><p><a href="GUID-E9306A17-2C65-46CD-BE42-D8D94D0E336E.html#THREAD_CONCURRENCY">Thread
				  concurrency</a></p>
</li>
<li id="LI_3AA636C07BCC43728B1EBCCF880336B4"><p><a href="GUID-E9306A17-2C65-46CD-BE42-D8D94D0E336E.html#VIEWPOINT">Viewpoint</a></p>
</li>
</ul>
</div>
<div class="section" id="GUID-CB3D6353-0B87-4468-A5F6-BAED6D5D8B3F"><h2 class="sectiontitle">Next Step</h2><p><a href="GUID-B245A744-74DE-484F-8F8B-F02E4797E4F8.html">Run Locks and
			 Waits Analysis</a></p>
</div>
</div>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a href="GUID-742F5949-4A88-4170-9A20-425DD0CFB029.html">Finding Hotspots</a></div>
</div>
<div></div>
</body>
</html>
